/**
 * new.du
 *
 * Testing the BigInt new function.
 *
 * .new() returns a Result value with a BigInt or an error. new()
 * takes 0 or 1 argument of either Number or String. If no argument 
 * is given, the returned BigInt value is set to 0.
 */

from UnitTest import UnitTest;

import BigInt;

class TestBigIntNew < UnitTest {
    testBigIntNewDefault() {
        const bi1 = BigInt.new();
        this.assertNotNil(bi1);
        this.assertSuccess(bi1);
    }

    testBigIntNewWithArg() {
        const bi1 = BigInt.new(7263535);
        this.assertNotNil(bi1);
        this.assertSuccess(bi1);

        const bi2 = BigInt.new("7263535");
        this.assertNotNil(bi2);
        this.assertSuccess(bi2);
    }

    testBigIntNewLargeDouble() {
        const bi1 = BigInt.new(5000000000);
        this.assertNotNil(bi1);
        this.assertSuccess(bi1);

        const bi2 = BigInt.new("5000000000");
        this.assertSuccess(bi2);
        this.assertEquals(bi1.unwrap().compare(bi2.unwrap()), 0);
    }

    testBigIntNewVeryLargeDouble() {
        const bi1 = BigInt.new(9007199254740992);
        this.assertNotNil(bi1);
        this.assertSuccess(bi1);

        const bi2 = BigInt.new("9007199254740992");
        this.assertSuccess(bi2);
        this.assertEquals(bi1.unwrap().compare(bi2.unwrap()), 0);
    }

    testBigIntNewLargeNegativeDouble() {
        const bi1 = BigInt.new(-5000000000);
        this.assertNotNil(bi1);
        this.assertSuccess(bi1);

        const bi2 = BigInt.new("-5000000000");
        this.assertSuccess(bi2);
        this.assertEquals(bi1.unwrap().compare(bi2.unwrap()), 0);
    }

    testBigIntNewDoubleTruncatesFraction() {
        const bi1 = BigInt.new(5000000000.75);
        this.assertSuccess(bi1);

        const bi2 = BigInt.new("5000000000");
        this.assertSuccess(bi2);
        this.assertEquals(bi1.unwrap().compare(bi2.unwrap()), 0);
    }

    testBigIntNewError() {
        const bi1 = BigInt.new("asdf");
        this.assertError(bi1);
    }
}

TestBigIntNew().run();
